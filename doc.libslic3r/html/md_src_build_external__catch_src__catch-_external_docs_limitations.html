<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libslic3r: limitations</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libslic3r
   </div>
   <div id="projectbrief">Library for generating gcode from 3d models</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">limitations </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="top"></a> </p><h1>Known limitations</h1>
<p><a class="el" href="namespace_catch.html">Catch</a> has some known limitations, that we are not planning to change. Some of these are caused by our desire to support C++98 compilers, some of these are caused by our desire to keep <a class="el" href="namespace_catch.html">Catch</a> crossplatform, some exist because their priority is seen as low compared to the development effort they would need and some other yet are compiler/runtime bugs.</p>
<h2>Implementation limits</h2>
<h3>Sections nested in loops</h3>
<p>If you are using <code>SECTION</code>s inside loops, you have to create them with different name per loop's iteration. The recommended way to do so is to incorporate the loop's counter into section's name, like so </p><div class="fragment"><div class="line"><a class="code" href="include_2catch_8hpp.html#abd6e2aec703006b3da62cf7860c9808f">TEST_CASE</a>( <span class="stringliteral">&quot;Looped section&quot;</span> ) {</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">char</span> i = <span class="charliteral">&#39;0&#39;</span>; i &lt; <span class="charliteral">&#39;5&#39;</span>; ++i) {</div>
<div class="line">        <a class="code" href="include_2catch_8hpp.html#ad512fd95a78b95770b9759823f8fbc21">SECTION</a>(std::string(<span class="stringliteral">&quot;Looped section &quot;</span>) + i) {</div>
<div class="line">            <a class="code" href="include_2catch_8hpp.html#a8e852a9421caf4fda4e1903d9f02bcf5">SUCCEED</a>( <span class="stringliteral">&quot;Everything is OK&quot;</span> );</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h2>Features</h2>
<p>This section outlines some missing features, what is their status and their possible workarounds.</p>
<h3>Thread safe assertions</h3>
<p>Because threading support in standard C++98 is limited (well, non-existent), assertion macros in <a class="el" href="namespace_catch.html">Catch</a> are not thread safe. This does not mean that you cannot use threads inside <a class="el" href="namespace_catch.html">Catch</a>'s test, but that only single thread can interact with <a class="el" href="namespace_catch.html">Catch</a>'s assertions and other macros.</p>
<p>This means that this is ok </p><div class="fragment"><div class="line">std::vector&lt;std::thread&gt; threads;</div>
<div class="line">std::atomic&lt;int&gt; cnt{ 0 };</div>
<div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 4; ++i) {</div>
<div class="line">    threads.emplace_back([&amp;]() {</div>
<div class="line">        ++cnt; ++cnt; ++cnt; ++cnt;</div>
<div class="line">    });</div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; t : threads) { t.join(); }</div>
<div class="line"><a class="code" href="include_2catch_8hpp.html#ad57835ba8f1bb419a865ada6bd011a85">REQUIRE</a>(cnt == 16);</div>
</div><!-- fragment --><p>because only one thread passes the <code>REQUIRE</code> macro and this is not </p><div class="fragment"><div class="line">std::vector&lt;std::thread&gt; threads;</div>
<div class="line">std::atomic&lt;int&gt; cnt{ 0 };</div>
<div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 4; ++i) {</div>
<div class="line">    threads.emplace_back([&amp;]() {</div>
<div class="line">        ++cnt; ++cnt; ++cnt; ++cnt;</div>
<div class="line">        <a class="code" href="include_2catch_8hpp.html#a836cca6b6ed3a1706353f6d1bca0935f">CHECK</a>(cnt == 16);</div>
<div class="line">    });</div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; t : threads) { t.join(); }</div>
<div class="line"><a class="code" href="include_2catch_8hpp.html#ad57835ba8f1bb419a865ada6bd011a85">REQUIRE</a>(cnt == 16);</div>
</div><!-- fragment --><p><em>This limitation is highly unlikely to be lifted before <a class="el" href="namespace_catch.html">Catch</a> 2 is released.</em></p>
<h3>Process isolation in a test</h3>
<p><a class="el" href="namespace_catch.html">Catch</a> does not support running tests in isolated (forked) processes. While this might in the future, the fact that Windows does not support forking and only allows full-on process creation and the desire to keep code as similar as possible across platforms, mean that this is likely to take significant development time, that is not currently available.</p>
<h3>Running multiple tests in parallel</h3>
<p><a class="el" href="namespace_catch.html">Catch</a>'s test execution is strictly serial. If you find yourself with a test suite that takes too long to run and you want to make it parallel, there are 2 feasible solutions</p><ul>
<li>You can split your tests into multiple binaries and then run these binaries in parallel.</li>
<li>You can have <a class="el" href="namespace_catch.html">Catch</a> list contained test cases and then run the same test binary multiple times in parallel, passing each instance list of test cases it should run.</li>
</ul>
<p>Both of these solutions have their problems, but should let you wring parallelism out of your test suite.</p>
<h2>3rd party bugs</h2>
<p>This section outlines known bugs in 3rd party components (this means compilers, standard libraries, standard runtimes).</p>
<h3>Visual Studio 2017 &ndash; raw string literal in assert fails to compile</h3>
<p>There is a known bug in Visual Studio 2017 (VC 15), that causes compilation error when preprocessor attempts to stringize a raw string literal (<code>#</code> preprocessor is applied to it). This snippet is sufficient to trigger the compilation error: </p><div class="fragment"><div class="line"><span class="preprocessor">#define CATCH_CONFIG_MAIN</span></div>
<div class="line"><span class="preprocessor">#include &quot;catch.hpp&quot;</span></div>
<div class="line"> </div>
<div class="line"><a class="code" href="include_2catch_8hpp.html#abd6e2aec703006b3da62cf7860c9808f">TEST_CASE</a>(<span class="stringliteral">&quot;test&quot;</span>) {</div>
<div class="line">    <a class="code" href="include_2catch_8hpp.html#a836cca6b6ed3a1706353f6d1bca0935f">CHECK</a>(std::string(R<span class="stringliteral">&quot;(&quot;\)&quot;) == </span><span class="stringliteral">&quot;\&quot;\\&quot;</span>);</div>
<div class="line">}</div>
</div><!-- fragment --><p><a class="el" href="namespace_catch.html">Catch</a> provides a workaround, it is possible to disable stringification of original expressions by defining <code>CATCH_CONFIG_DISABLE_STRINGIFICATION</code>: </p><div class="fragment"><div class="line"><span class="preprocessor">#define CATCH_CONFIG_FAST_COMPILE</span></div>
<div class="line"><span class="preprocessor">#define CATCH_CONFIG_DISABLE_STRINGIFICATION</span></div>
<div class="line"><span class="preprocessor">#include &quot;catch.hpp&quot;</span></div>
<div class="line"> </div>
<div class="line"><a class="code" href="include_2catch_8hpp.html#abd6e2aec703006b3da62cf7860c9808f">TEST_CASE</a>(<span class="stringliteral">&quot;test&quot;</span>) {</div>
<div class="line">    <a class="code" href="include_2catch_8hpp.html#a836cca6b6ed3a1706353f6d1bca0935f">CHECK</a>(std::string(R<span class="stringliteral">&quot;(&quot;\)&quot;) == </span><span class="stringliteral">&quot;\&quot;\\&quot;</span>);</div>
<div class="line">}</div>
</div><!-- fragment --><p><em>Do note that this changes the output somewhat</em> </p><div class="fragment"><div class="line">catchwork\test1.cpp(6):</div>
<div class="line">PASSED:</div>
<div class="line">  CHECK( Disabled by CATCH_CONFIG_DISABLE_STRINGIFICATION )</div>
<div class="line">with expansion:</div>
<div class="line">  &quot;&quot;\&quot; == &quot;&quot;\&quot;</div>
</div><!-- fragment --><h3>Visual Studio 2013 &ndash; do-while loop withing range based for fails to compile (C2059)</h3>
<p>There is a known bug in Visual Studio 2013 (VC 12), that causes compilation error if range based for is followed by an assertion macro, without enclosing the block in braces. This snippet is sufficient to trigger the error </p><div class="fragment"><div class="line"><span class="preprocessor">#define CATCH_CONFIG_MAIN</span></div>
<div class="line"><span class="preprocessor">#include &quot;catch.hpp&quot;</span></div>
<div class="line"> </div>
<div class="line"><a class="code" href="include_2catch_8hpp.html#abd6e2aec703006b3da62cf7860c9808f">TEST_CASE</a>(<span class="stringliteral">&quot;Syntax error with VC12&quot;</span>) {</div>
<div class="line">    <span class="keywordflow">for</span> ( <span class="keyword">auto</span> x : { 1 , 2, 3 } )</div>
<div class="line">        <a class="code" href="include_2catch_8hpp.html#ad57835ba8f1bb419a865ada6bd011a85">REQUIRE</a>( x &lt; 3.14 );</div>
<div class="line">}</div>
</div><!-- fragment --><p>An easy workaround is possible, use braces: </p><div class="fragment"><div class="line"><span class="preprocessor">#define CATCH_CONFIG_MAIN</span></div>
<div class="line"><span class="preprocessor">#include &quot;catch.hpp&quot;</span></div>
<div class="line"> </div>
<div class="line"><a class="code" href="include_2catch_8hpp.html#abd6e2aec703006b3da62cf7860c9808f">TEST_CASE</a>(<span class="stringliteral">&quot;No longer a syntax error with VC12&quot;</span>) {</div>
<div class="line">    <span class="keywordflow">for</span> ( <span class="keyword">auto</span> x : { 1 , 2, 3 } ) {</div>
<div class="line">        <a class="code" href="include_2catch_8hpp.html#ad57835ba8f1bb419a865ada6bd011a85">REQUIRE</a>( x &lt; 3.14 );</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h3>Visual Studio 2003 &ndash; Syntax error caused by improperly expanded <code>__LINE__</code> macro</h3>
<p>Older version of Visual Studio can have trouble compiling <a class="el" href="namespace_catch.html">Catch</a>, not expanding the <code>__LINE__</code> macro properly when recompiling the test binary. This is caused by Edit and Continue being on.</p>
<p><a class="el" href="namespace_a.html">A</a> workaround is to turn off Edit and Continue when compiling the test binary.</p>
<h3>Clang/G++ &ndash; skipping leaf sections after an exception</h3>
<p>Some versions of <code>libc++</code> and <code>libstdc++</code> (or their runtimes) have a bug with <code>std::uncaught_exception()</code> getting stuck returning <code>true</code> after rethrow, even if there are no active exceptions. One such case is this snippet, which skipped the sections "a" and "b", when compiled against <code>libcxxrt</code> from master </p><div class="fragment"><div class="line"><span class="preprocessor">#define CATCH_CONFIG_MAIN</span></div>
<div class="line"><span class="preprocessor">#include &lt;catch.hpp&gt;</span></div>
<div class="line"> </div>
<div class="line"><a class="code" href="include_2catch_8hpp.html#abd6e2aec703006b3da62cf7860c9808f">TEST_CASE</a>(<span class="stringliteral">&quot;a&quot;</span>) {</div>
<div class="line">    <a class="code" href="include_2catch_8hpp.html#a5c646dfe831e596b59073014c1c8b9e5">CHECK_THROWS</a>(<span class="keywordflow">throw</span> 3);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code" href="include_2catch_8hpp.html#abd6e2aec703006b3da62cf7860c9808f">TEST_CASE</a>(<span class="stringliteral">&quot;b&quot;</span>) {</div>
<div class="line">    <span class="keywordtype">int</span> i = 0;</div>
<div class="line">    <a class="code" href="include_2catch_8hpp.html#ad512fd95a78b95770b9759823f8fbc21">SECTION</a>(<span class="stringliteral">&quot;a&quot;</span>) { i = 1; }</div>
<div class="line">    <a class="code" href="include_2catch_8hpp.html#ad512fd95a78b95770b9759823f8fbc21">SECTION</a>(<span class="stringliteral">&quot;b&quot;</span>) { i = 2; }</div>
<div class="line">    <a class="code" href="include_2catch_8hpp.html#a836cca6b6ed3a1706353f6d1bca0935f">CHECK</a>(i &gt; 0);</div>
<div class="line">}</div>
</div><!-- fragment --><p>If you are seeing a problem like this, i.e. a weird test paths that trigger only under Clang with <code>libc++</code>, or only under very specific version of <code>libstdc++</code>, it is very likely you are seeing this. The only known workaround is to use a fixed version of your standard library. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<div class="ttc" id="ainclude_2catch_8hpp_html_abd6e2aec703006b3da62cf7860c9808f"><div class="ttname"><a href="include_2catch_8hpp.html#abd6e2aec703006b3da62cf7860c9808f">TEST_CASE</a></div><div class="ttdeci">#define TEST_CASE(...)</div><div class="ttdef"><b>Definition:</b> catch.hpp:11844</div></div>
<div class="ttc" id="ainclude_2catch_8hpp_html_a836cca6b6ed3a1706353f6d1bca0935f"><div class="ttname"><a href="include_2catch_8hpp.html#a836cca6b6ed3a1706353f6d1bca0935f">CHECK</a></div><div class="ttdeci">#define CHECK(...)</div><div class="ttdef"><b>Definition:</b> catch.hpp:11820</div></div>
<div class="ttc" id="ainclude_2catch_8hpp_html_a5c646dfe831e596b59073014c1c8b9e5"><div class="ttname"><a href="include_2catch_8hpp.html#a5c646dfe831e596b59073014c1c8b9e5">CHECK_THROWS</a></div><div class="ttdeci">#define CHECK_THROWS(...)</div><div class="ttdef"><b>Definition:</b> catch.hpp:11826</div></div>
<div class="ttc" id="ainclude_2catch_8hpp_html_ad512fd95a78b95770b9759823f8fbc21"><div class="ttname"><a href="include_2catch_8hpp.html#ad512fd95a78b95770b9759823f8fbc21">SECTION</a></div><div class="ttdeci">#define SECTION(...)</div><div class="ttdef"><b>Definition:</b> catch.hpp:11848</div></div>
<div class="ttc" id="ainclude_2catch_8hpp_html_a8e852a9421caf4fda4e1903d9f02bcf5"><div class="ttname"><a href="include_2catch_8hpp.html#a8e852a9421caf4fda4e1903d9f02bcf5">SUCCEED</a></div><div class="ttdeci">#define SUCCEED(...)</div><div class="ttdef"><b>Definition:</b> catch.hpp:11851</div></div>
<div class="ttc" id="ainclude_2catch_8hpp_html_ad57835ba8f1bb419a865ada6bd011a85"><div class="ttname"><a href="include_2catch_8hpp.html#ad57835ba8f1bb419a865ada6bd011a85">REQUIRE</a></div><div class="ttdeci">#define REQUIRE(...)</div><div class="ttdef"><b>Definition:</b> catch.hpp:11809</div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
